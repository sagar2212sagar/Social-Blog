{% load static %}
<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!------ Include the above in your HEAD tag ---------->

<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" >
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!------ Include the above in your HEAD tag ---------->

<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
        crossorigin="anonymous">

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
<link rel="stylesheet" href="{% static 'blog/style.css'%}" >
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

   <body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = 'https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v3.2';
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>


<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
<a class="navbar-brand" href="{% url 'post_list' %}">EduHub</a>
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
  <span class="navbar-toggler-icon"></span>
</button>

<div class="collapse navbar-collapse" id="navbarSupportedContent">

    <ul class="nav navbar-nav navbar-right">
    {% if request.user.is_authenticated %}

     <li class="dropdown">
      <a class="dropdown-toggle " href="#"  role="button" data-toggle="dropdown">


          <img src="/media/sagar123.png" alt="" class="navbar-img">

        <span>Hi {{ request.user|capfirst }}</span>
      <b class="caret"></b></a>
      <ul class="dropdown-menu"  >



         <li> <a  href="{% url 'blog:post_create' %}">Create Post</a></li>
              <li> <a  href="{% url 'blog:contact' %}">Report/FeedBack</a></li>

           <li> <a  href="{% url 'user_logout' %}">Sign out</a></li>
      </ul>
    </li>
     </ul>
    {% else %}
    <li class="nav-item">
      <a href="{% url 'user_login' %}" class="nav-link">Login</a>
    </li>
    {% endif %}
  </ul>
</div>
</nav>


    <div class="container-fluid gedf-wrapper ">
    </div>
        <div class="row">

            <div class="col-lg-10 gedf-main">
                <div class="card gedf-card ">
                    <div class="card-header ">
                     <div class="d-flex justify-content-between align-items-center">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="mr-2">

                                </div>

                            </div>
                            <div>
                                <div class="dropdown">
                                    {% if post.author == request.user %}
                                    <button class="btn btn-link dropdown-toggle" type="button" id="gedf-drop1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <i class="fa fa-ellipsis-h"></i>
                                    </button>

                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="gedf-drop1">
                                        <a class="dropdown-item" href="{% url 'blog:post_delete' id=post.id %}" >Delete</a>
                                        <a class="dropdown-item" href="{% url 'blog:post_edit' id=post.id %}">Edit Post</a>
                                        <a class="dropdown-item" href="{% url 'blog:favorite_post' id=post.id %}">Save</a>
                                    </div>


                                </div>
                                {% endif %}
                            </div>
                        </div>

                    </div>
                    <div class="card-body">


                        <h1 ><b>{{post.title|capfirst}}</b></h1>

                        <hr>

                        <p class="card-text">
                            {{post.body}}
                        </p>


                        {% if post.image %}

                      <img src='{{post.image.url}}'class="card-img"/>

                          {% endif %}
                    </div>
<div class="card-footer" >
<div class="fb-like" data-href="{{ request.build_absolute_url}}" data-layout="standard" data-action="like" data-size="small" data-show-faces="true" data-share="true"></div>
    <hr>
     <div class="fb-comments" data-href="{{ request.build_absolute_url}}" data-numposts="5"></div>
    <!--div class="card-footer" >
 <div class="fb-comments" data-href="{{ request.build_absolute_url}}" data-numposts="5"></div>

                        <i><b>  {{ total_likes }} Like{{ total_likes|pluralize }}</b></i>
                   {% if request.user.is_authenticated %}
                    <form action="{% url 'like_post' %}" method="post">
                     {% csrf_token %}
                     {% if is_liked %}
                         <button  class="btn btn-danger btn-sm"  name="post_id" value="{{ post.id }}">
                         <span class="glyphicon glyphicon-thumbs-down"></span>
                        </button>

                    {% else %}
                         <button  class="btn btn-info btn-sm"  name="post_id" value="{{ post.id }}">{{ total_likes }}
                  <span class="glyphicon glyphicon-thumbs-up"></span>
        </button>

                    {% endif %}
                    </form>
                   {% endif %}

                    <!--div class="fb-share-button"  data-href="https://developers.facebook.com/" data-layout="button_count" data-size="large" data-mobile-iframe="true"><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Fplugins%2F&amp;src=sdkpreparse" class="fb-xfbml-parse-ignore">Share</a></div-->
                        </div>
                        </div>

                        <!--div class="container-fluid mt-2">
                    <div class="form-group row">
               <form method="post" class="comment-form" action=".">
      {% csrf_token %}
      {{ comment_form.as_p }}
      {% if request.user.is_authenticated %}
        <input type="submit" value="Submit" class="btn btn-outline-success">
      {% else %}
        <input type="submit" value="Submit" class="btn btn-outline-success" disabled>
      {% endif %}
    </form>
  </div>
</div>

{{ comments.count }} Comment{{ comments|pluralize }}
{% for comment in comments %}
  <blockquote class="blockquote">
    <p class="mb-0"><small>{{ comment.content }}</small></p>
    <footer class="blockquote-footer"><small>by <cite title="Source Title">{{ comment.user|capfirst }}</cite></small>
      <button type="button" name="button" class="reply-btn btn btn-outline-dark btn-sm ml-2">Reply</button>
    </footer>
  </blockquote>

  <div class="replied-comments container mt-2" style="display:none;">
    {% for reply in comment.replies.all %}
    <blockquote class="blockquote">
      <p class="mb-0"><small>{{ reply.content }}</small></p>
      <footer class="blockquote-footer"><small>by <cite title="Source Title">{{ reply.user|capfirst }}</cite></small>
    </footer>
    </blockquote>
    {% endfor %}
    <div class="form-group row">
      <form method="post" class="reply-form" action="">
        {% csrf_token %}
        <input type="hidden" name="comment_id" value="{{ comment.id }}">
        {{ comment_form.as_p }}
        {% if request.user.is_authenticated %}
          <input type="submit" value="Submit" class="btn btn-outline-success">
        {% else %}
          <input type="submit" value="Submit" class="btn btn-outline-success" disabled>
        {% endif %}
      </form>
    </div>
  </div>
{% endfor %}

                    </div-->





 </div>


</div>
                      </div>




            </div>

        </div>
    </div>
   </body>
